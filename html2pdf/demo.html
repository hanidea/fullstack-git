<!DOCTYPE>
<html>
  <head>
    <title>
      html2canvas example
    </title>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <style type="text/css">
        *{
            margin: 0;
            padding: 0;
        }
    </style>
</head>
<body style="font-family: 'microsoft yahei';background: #fff;font-size: 14px;font-weight: bold;">
    <div style="width: 500px;margin: 0 auto;border: 1px solid #333;border-bottom: none;" id="contents">
        
        <table border="0" cellspacing="0" cellpadding="0" style="width: 100%;		border-collapse: collapse;border-spacing: 0;">
            <tr style="border-bottom: 1px solid #333;">
                <td style="padding-left: 10px;"><div style="font-size: 32px;">澳邮中国快运</div><div style="font-size: 18px;">www.auexpress.com</div></td>
                <td colspan="2">
                    <div><img src="ewm1.png"/></div>
                <div><span>单号</span><span>ZA02673038225</span></div>
                </td>
            </tr>
            <tr >
                <td style="padding-left: 10px;">
                    <div >寄件人：<span></span></div>
                </td>
                <td colspan="2"> 
                    <div >电话：<span>0</span></div>
                </td>
            </tr>	
                            <tr >
                <td style="padding-left: 10px;" colspan="3">
                    <div >地址：<span>Australia</span></div>
                </td>
            </tr>
                            <tr style="border-bottom: 1px solid #333;">
                <td style="padding-left: 10px;padding-bottom: 20px;">
                    <div >重量(KG)：<span>3.6</span></div>
                </td>
                <td colspan="2" style="padding-bottom: 20px;">
                    <div >保价金额：<span>0</span></div>
                </td>
            </tr>	
                        <tr >
                        <td style="padding-left: 10px;">
                    <div >收件人：<span>张海峰</span></div>
                </td>
                <td >
                    <div >城市：<span>北京市</span></div>
                </td>
                <td></td>
            </tr>	
                                        <tr >
                        <td style="padding-left: 10px;">
                    <div >电话：<span>1236445789</span></div>
                </td>
                <td >
                    <div >邮编：<span>100000</span></div>
                </td>
                <td></td>
            </tr>	
                            <tr >
                <td style="padding-left: 10px;"  colspan="3">
                    <div >地址：<span>河北省唐山市路北区万科金域华府B1--3104</span></div>
                </td>

            </tr>
            <tr style="height: 20px;"></tr>
                            <tr style="border-bottom: 1px solid #333;">
                <td style="padding-left: 10px;">
                    <div >订单时间：<span>2018-03-20</span></div>
                </td>
                <td colspan="2">
                    <div >单号：<span></span></div>
                </td>
            </tr>	
            <tr>
                <td style="padding-left: 10px;">
                                        <div >客户：<span>2345</span></div>

                </td>
                <td>
                                        <div >编号：<span>180124632</span></div>
                </td>
                <td rowspan="4"  style="border-bottom: 1px dashed #333;padding-bottom: 20px;">
                                    <div><span>已录单</span><span style="font-size: 20px;">（1.贴货联）</span></div>
            <div style="text-align: center; margin-top:5px ;"><img src="ewm2.png"/></div>
                </td>
            </tr>
            <tr>
                <td colspan="2" style="padding-left: 10px;">
                                        <div >客户电话：<span>2345</span></div>

                </td>
                    </tr>
            <tr>
                <td colspan="2" style="padding-left: 10px;">
                                        <div >备注：<span>2345</span></div>

                </td>
                    </tr>	
                                <tr  style="border-bottom: 1px dashed #333;">
                <td colspan="2" style="padding-left: 10px;padding-bottom: 20px;">
                            <div >可瑞康羊奶三段*3</div>

                </td>
                    </tr>		
            <tr>
                <td style="padding-left: 10px;">
                    <div>寄件人：<span></span></div>
                </td>
                <td> 
                    <div>重量(KG)：<span>0</span></div>
                </td>
                <td>	<div>电话：<span>0</span></div></td>
            </tr>		
            <tr  style="border-bottom: 1px solid #333;">
                <td style="padding-left: 10px;padding-bottom: 20px;" colspan="2">
                    <div>地址：<span>Australia</span></div>
                </td>
                <td style="padding-bottom: 20px;">	<div>代理店：<span>2354</span></div></td>
            </tr>	
                            <tr >
                <td style="padding-left: 10px;">
                    <div >收件人：<span>田慧</span></div>
                </td>
                <td colspan="2" > 
                    <div >电话：<span>12345678922</span></div>
                </td>
            </tr>	
                            <tr  style="border-bottom: 1px solid #333;">
                <td style="padding-left: 10px;padding-bottom: 20px;" colspan="3">
                    <div >地址：<span>河北省唐山市路北区万科金域华府B1--3104</span></div>
                </td>
            </tr>
                            <tr style="border-bottom: 1px solid #333;" class="counts">
                <td style="padding-left: 10px;">
                <div style="font-size: 20px;"><span >澳邮</span><span style="margin-left: 30px;">单号：</span></div>
                <div><img src="ewm1.png"/></div>
                <div style="text-align: center;"><span>ZA02673038225</span></div>
                </td>
                <td colspan="2">
                <div >单号:</div>
                <div style="margin-top: 47px;"><span>已录单</span><span style="font-size: 20px;">（2.贴货联）</span></div>
                </td>
            </tr>
        </table>
        
        
        

        </div>	
        <button id="renderPdf">导出pdf</button>
    <script type="text/javascript" src="./js/html2canvas.js"></script>
    <script type="text/javascript" src="./js/jsPdf.debug.js"></script>
    <script type="text/javascript">

      var downPdf = document.getElementById("renderPdf");

      downPdf.onclick = function() {
          html2canvas(document.body, {
              onrendered:function(canvas) {

                  var contentWidth = canvas.width;
                  var contentHeight = canvas.height;

                  //一页pdf显示html页面生成的canvas高度;
                  var pageHeight = contentWidth / 595.28 * 841.89;
                  //未生成pdf的html页面高度
                  var leftHeight = contentHeight;
                  //pdf页面偏移
                  var position = 0;
                  //a4纸的尺寸[595.28,841.89]，html页面生成的canvas在pdf中图片的宽高
                  var imgWidth = 555.28;
                  var imgHeight = 555.28/contentWidth * contentHeight;

                  var pageData = canvas.toDataURL('image/jpeg', 1.0);

                  var pdf = new jsPDF('', 'pt', 'a4');
                  //有两个高度需要区分，一个是html页面的实际高度，和生成pdf的页面高度(841.89)
                  //当内容未超过pdf一页显示的范围，无需分页
                  if (leftHeight < pageHeight) {
                      pdf.addImage(pageData, 'JPEG', 20, 0, imgWidth, imgHeight );
                  } else {
                      while(leftHeight > 0) {
                          pdf.addImage(pageData, 'JPEG', 20, position, imgWidth, imgHeight)
                          leftHeight -= pageHeight;
                          position -= 841.89;
                          //避免添加空白页
                          if(leftHeight > 0) {
                              pdf.addPage();
                          }
                      }
                  }

                  pdf.save('content.pdf');
              }
          })
      }
    </script>
  </body>
</html>